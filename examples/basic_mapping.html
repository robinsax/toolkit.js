<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- 
			A Hello World example of data-DOM mapping
		-->
		<script src="../toolkit.js"></script>
		<script defer>
			//	Create a toolkit
			var tk = createToolkit({
				templateContainer: '.hello-templates'
			});

			//	Create some data
			var data = [
				{
					'title': 'Mapped data',
					'type': 'foo',
					'text': 'Modify me in the browser console as "mappedData[0]"',
					'comments': [
						{
							'content': 'Cool!'
						}
					]
				}
			];

			//	When the DOM is loaded, map it to the template
			var mappedData;
			tk.init(function(){
				mappedData = tk.map(data, 'thread', tk('.page-area'), {
					'add_comment': function(mapping, e){
						var comment = e.parent().children('input[type="text"]').value();
						mapping.comments.push({
							'content': comment
						});
					}
				});
			});
		</script>
		
		<style>
			.page-area {
				text-align: center;
			}
			.thread {
				width: 200px;
				margin: 10px;
				padding: 10px;
				border-radius: 5px;
				background-color: lightcoral;
			}
		</style>
	</head>
	<body>
		<div class="hello-templates">
			<div class="thread" tk-template="thread">
				<h2 tk-bind="type title" tk-view-fn="- <lambda: v.toUpperCase()>" tk-onto="attr:class"></h2>
				<p tk-bind="text"></p>
				<ul tk-bind="comments">
					<li>
						<p tk-bind="content"></p>
					</li>
				</ul>
				<h4>Leave a comment</h4>
				<input type="text" placeholder="Comment">
				<input type="button" tk-event="add_comment" value="Leave it">
			</div>
		</div>
		<div class="page-area"></div>
	</body>
</html>