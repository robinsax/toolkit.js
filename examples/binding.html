<!DOCTYPE html>
<html lang="en">
	<head>
		<script src="../toolkit.js"></script>
		<script defer>
			var tk = createToolkit();

			var articles = [
				{
					title: 'Corporate business report 2022',
					content: 'Makin\'.',
					color: 'blue',
					comments: [
						'Nice!',
						'Wow rlly!?',
						'Lame.'
					]
				},
				{
					title: 'The environment is gone.',
					content: 'Goodbye!',
					color: 'green',
					comments: [
						'Wind enerjie.'
					]
				}
			];

			function createArticle(article){
				return tk.tag('div').classify('article', true)
					.bind(article, 'color')
						.placement(function(d, e){ e.css('background-color', d); })
						.begin()
					.append([
						tk.tag('h3').bind(article, 'title')
							.transform(function(d){ return d.toUpperCase(); })
							.begin(),
						tk.tag('p').bind(article, 'content').begin(),
						tk.tag('ul').bind(article, 'comments')
							.placement(function(d, e){
								e.append(
									tk.comprehension(d, function(item){ return tk.tag('li').html(item) })
								);
							})
							.reset(function(d, e){ e.html(''); })
							.begin()
					])
				.back();
			}

			function createRandomNumberList(listHolder){
				return tk.tag('div')
					.append([
						tk.tag('div').css('background-color', 'red').bind(listHolder, 'list')
							.placement(function(d, e){
								e.css({
									'width': Math.max.apply(null, d)*100,
									'height': (1 - Math.min.apply(null, d))*100
								});
							})
							.begin(),
						tk.tag('h4').bind(listHolder, 'list')
							.transform(function(d){ return d.length; })
							.placement(function(d, e){ e.html('Count: ' + d); })
							.begin(),
						tk.tag('ol').bind(listHolder, 'list')
							.placement(function(d, e){ 
								e.append(
									tk.comprehension(d, function(item){ return tk.tag('li').html(item) })
								); 
							})
							.reset(function(d, e){ e.html(''); })
							.begin()
					])
				.back();
			}

			var list = [];
			tk.repeat(function(){
				list.push(Math.random());
			}, 500);

			tk.init(function(){
				tk('body').append([
					tk.comprehension(articles, createArticle),
					createRandomNumberList({list: list})
				]);
			});
		</script>
	</head>
	<body></body>
</html>